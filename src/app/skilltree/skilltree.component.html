
<div class="skillTreeContainer">

    <svg height="100%" width="100%" viewBox="0 0 300 600" class="tree">
        <linearGradient *ngIf="color == 'blue'" id="blueFill" x1="0" x2="0" y1="0" y2="1">
            <stop offset="15.5%" stop-color="rgb(34, 92, 137)"/>
            <stop offset="17.5%" stop-color="rgb(132, 164, 189)"/>
            <stop offset="0%" stop-color="rgb(9, 22, 35)"/>
        </linearGradient>
        <linearGradient *ngIf="color == 'green'" id="greenFill" x1="0" x2="0" y1="0" y2="1">
            <stop offset="15.5%" stop-color="rgb(61, 97, 28)"/>
            <stop offset="17.5%" stop-color="rgb(145, 166, 127)"/>
            <stop offset="0%" stop-color="rgb(24, 38, 10)"/>
        </linearGradient>
        <linearGradient *ngIf="color == 'red'" id="redFill" x1="0" x2="0" y1="0" y2="1">
            <stop offset="15.5%" stop-color="rgb(88, 47, 27)"/>
            <stop offset="17.5%" stop-color="rgb(161, 138, 126)"/>
            <stop offset="0%" stop-color="rgb(36, 16, 5)"/>
        </linearGradient>

        <polygon points="2,18 17,2 52,2 67,18
                            232,18 248,2 283,2 298,18 
                            298,578 280,598 
                            20,598 2,578" class="topBorder"></polygon>
        <polygon points="2,18 17,2 52,2 67,18
                            232,18 248,2 283,2 298,18 
                            298,578 280,598 
                            20,598 2,578" class="middleBorder"></polygon>
        <polygon points="2,18 17,2 52,2 67,18
                            232,18 248,2 283,2 298,18 
                            298,578 280,598 
                            20,598 2,578" class="mainBack"></polygon>
        <polygon points="12,56 17,50 42,50 50,58 
                            250,58 258,50 283,50 288,56 
                            288,535 273,550 
                            27,550 12,535" class="mainFront"></polygon>

        <text class="treeName doNotSelect" x="50%" y="96.5%" dominant-baseline="middle" text-anchor="middle">{{treeName}}</text>

        <filter id="highlight">
                <feGaussianBlur stdDeviation="3" result="blurred" />
                <feFlood flood-color="yellow" result="glowColor" />
                <feComposite in="glowColor" in2="blurred" operator="in" result="glow" />
                <feMerge>
                    <feMergeNode in="glow"/>
                    <feMergeNode in="SourceGraphic"/>
                </feMerge>
                <feColorMatrix type="matrix"
                result="highlight"
                values="1 0 0 0 0
                        0 1 0 0 0
                        0 0 0 0 0
                        0 0 0 1 0" />
                <feComponentTransfer>
                    <feFuncR type="linear" slope="3"/>
                    <feFuncG type="linear" slope="3"/>
                    <feFuncB type="linear" slope="3"/>
                </feComponentTransfer>
        </filter>
        <filter *ngIf="color == 'blue'" id="activatedBlue">
                <feColorMatrix type="matrix"
                values="0 0 0 0 0
                        0 1 0 0 0
                        0 0 1 0 0
                        0 0 0 1 0" />
                <feComponentTransfer>
                    <feFuncR type="linear" slope="2"/>
                    <feFuncG type="linear" slope="2"/>
                    <feFuncB type="linear" slope="2"/>
                </feComponentTransfer>
        </filter>
        <filter *ngIf="color == 'red'" id="activatedRed">
                <feColorMatrix type="matrix"
                values="0.99 0 0 0 0
                        0 0.58 0 0 0
                        0 0 0.17 0 0
                        0 0 0 1 0" />
                <feComponentTransfer>
                    <feFuncR type="linear" slope="2"/>
                    <feFuncG type="linear" slope="2"/>
                    <feFuncB type="linear" slope="2"/>
                </feComponentTransfer>
        </filter>
        <filter *ngIf="color == 'green'" id="activatedGreen">
                <feColorMatrix type="matrix"
                values="0.42 0 0 0 0
                        0 0.77 0 0 0
                        0 0 0.06 0 0
                        0 0 0 1 0" />
                <feComponentTransfer>
                    <feFuncR type="linear" slope="2"/>
                    <feFuncG type="linear" slope="2"/>
                    <feFuncB type="linear" slope="2"/>
                </feComponentTransfer>
        </filter>
        
        <g [class.activated]="skill.allocatedPoints > skill.MIN_POINTS" 
            class="skill doNotSelect" *ngFor="let skill of skills" 
            (click)="addPoint(skill)" (contextmenu)="removePoint(skill)" oncontextmenu="return false;">

            <image height="10%" attr.x="{{9 + (skill.position[1] * 30)}}%" attr.y="{{11 + (skill.position[0] * 13.8)}}%" href="assets/images/skilltree/skillBox.png"></image>
            <image height="7%" attr.x="{{13 + (skill.position[1] * 30)}}%" attr.y="{{12.5 + (skill.position[0] * 13.8)}}%" attr.href="{{skill.path}}" ></image>
            <image height="4%" attr.x="{{22 + (skill.position[1] * 30)}}%" attr.y="{{19 + (skill.position[0] * 13.8)}}%" href="assets/images/skilltree/pointBox.png"></image>
            <text class="points" attr.x="{{27.5 + (skill.position[1] * 30)}}%"
             attr.y="{{22 + (skill.position[0] * 13.8)}}%"
             text-anchor="middle">{{skill.allocatedPoints}}/{{skill.maxPoints}}</text>
        </g>
        
    </svg>
</div>
