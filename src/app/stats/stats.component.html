<div class="stats">
    <div class="stats-header">
        <p class="character-level">Lvl: {{allocatedPoints + CHARACTER_OFFSET}}</p>
        <p class="heading">Stats</p>
    </div>
    <div id="stats-container" class="info flex wrapped">
        <div id="equipped-skills" class="info-section flex wrapped horizontal-align-center">
            <div class="info-section-header"><p>Equipped Skills</p></div>
            <div *ngFor="let skill of _maxActionSkills" class="equipped-skill flex vetical-align-center wrapped" [style.width]="100/_maxActionSkills.length + '%'">
                
                    <div [style.background-image]="equippedSkills[skill].actionSkill != null ? 'url(' + equippedSkills[skill].actionSkill.getSkillBoxPath() + ')' : 'url(assets/images/skilltree/actionSkillBox.png)'"
                            [ngStyle]="{'background-size': 'contain', 
                                    'background-repeat': 'no-repeat',
                                    'background-position': 'center',
                                    'min-width' :_maxActionSkills.length < 2 ? 
                                    MATH.floor(100/(_maxActionSkills.length + _maxActionMods.length + _maxOtherSkills.length)) + '%':
                                                '100%'}">
                        <img   *ngIf="equippedSkills[skill].actionSkill != null"  
                                class="skill-image" attr.src="{{equippedSkills[skill].actionSkill != null ? equippedSkills[skill].actionSkill.getPath() : ''}}" 
                                alt="Skill Image" displaySkill [skill]="equippedSkills[skill].actionSkill"/>
                    </div>

                    <div *ngFor="let mod of _maxActionMods" 
                            [style.background-image]="equippedSkills[skill].actionMods[mod] != null 
                            ? 'url(' + equippedSkills[skill].actionMods[mod].getSkillBoxPath() + ')' 
                            : 'url(assets/images/skilltree/actionSkillModBox.png)'"
                            [ngStyle]="{'background-size': 'contain', 
                                    'background-repeat': 'no-repeat',
                                    'background-position': 'center',
                                    'min-width' : _maxActionSkills.length < 2 ? 
                                    MATH.floor(100/(_maxActionSkills.length + _maxActionMods.length + _maxOtherSkills.length)) + '%':
                                    '100%'}">
                        <img    *ngIf="equippedSkills[skill].actionMods[mod] != null" 
                                class="skill-image" 
                                attr.src="{{equippedSkills[skill].actionMods[mod].getPath()}}" 
                                alt="Skill Image" displaySkill [skill]="equippedSkills[skill].actionMods[mod]" />
                    </div>

                    <div *ngIf="_maxOtherSkills.length > 0" 
                            [style.background-image]="equippedSkills[skill].otherSkill != null 
                            ? 'url(' + equippedSkills[skill].otherSkill.getSkillBoxPath() + ')' 
                            : 'url(assets/images/skilltree/otherSkillBox.png)'"
                            [ngStyle]="{'background-size': 'contain', 
                                    'background-repeat': 'no-repeat',
                                    'background-position': 'center',
                                    'min-width' : _maxActionSkills.length < 2 ? 
                                    MATH.floor(100/(_maxActionSkills.length + _maxActionMods.length + _maxOtherSkills.length)) + '%':
                                    '100%'}">
                            <img   *ngIf="equippedSkills[skill].otherSkill != null"
                                    class="skill-image"
                                    attr.src="{{(equippedSkills[skill].otherSkill != null) ?
                                            equippedSkills[skill].otherSkill.getPath() : ''}}"  
                                    alt="Skill Image" displaySkill [skill]="equippedSkills[skill].otherSkill" />
                    </div>
                    
            </div>
        </div>
        <div class="info-section flex">
            <div class="info-section-header"><p>Offensive Stats</p></div>
            <table class="stats-table">
                <tr>
                    <th>
                        Stat
                    </th>
                    <th class="value">
                        Value
                    </th>
                </tr>
                <ng-container *ngFor="let stat of offensiveStats | keyvalue">
                    <tr *ngIf="stat.value.value != 0">
                        <td>
                            {{stat.value.header}}
                        </td>
                        <td class="value">    
                            {{stat.value.type == null ? stat.value.value : stat.value.value.toFixed(2)}}%
                        </td>
                    </tr>
                </ng-container>
            </table>
        </div>

        <div class="info-section flex">
            <div class="info-section-header"><p>Defensive Stats</p></div>
            <table class="stats-table">
                <tr>
                    <th>
                        Stat
                    </th>
                    <th class="value">
                        Value
                    </th>
                </tr>
                <ng-container *ngFor="let stat of defensiveStats | keyvalue">
                    <tr *ngIf="stat.value.value != 0">
                        <td>
                            {{stat.value.header}}
                        </td>
                        <td class="value">    
                            {{stat.value.type == null ? stat.value.value : stat.value.value.toFixed(2)}}%
                        </td>
                    </tr>
                </ng-container>
            </table>
        </div>

        <div class="info-section flex">
            <div class="info-section-header"><p>Utility Stats</p></div>
            <table class="stats-table">
                <tr>
                    <th>
                        Stat
                    </th>
                    <th class="value">
                        Value
                    </th>
                </tr>
                <ng-container *ngFor="let stat of utilityStats | keyvalue">
                    <tr *ngIf="stat.value.value != 0">
                        <td>
                            {{stat.value.header}}
                        </td>
                        <td class="value">    
                            {{stat.value.type == null ? stat.value.value : stat.value.value.toFixed(2)}}%
                        </td>
                    </tr>
                </ng-container>
            </table>
        </div>

        <div class="info-section flex">
            <div class="info-section-header"><p>Extra Stats</p></div>
            <table class="stats-table">
                <tr>
                    <th>
                        Stat
                    </th>
                    <th class="value">
                        Value
                    </th>
                </tr>
                <ng-container *ngFor="let stat of extraStats | keyvalue">
                    <tr *ngIf="stat.value.value != 0">
                        <td>
                            {{stat.value.header}}
                        </td>
                        <td class="value">    
                            {{stat.value.value.toFixed(2)}}<span *ngIf="stat.value.valueType == 'percent'">%</span>
                        </td>
                    </tr>
                </ng-container>
            </table>
        </div>

        <div id="configs" class="info-section doNotSelect">
            <div class="info-section-header"><p>Configurations</p></div>
            <div [hidden]="conditional[0].header == null" *ngFor="let conditional of conditionals" class="config">
                <label class="conditional-label" *ngIf="conditional[0].header != null">
                    <p class="input-header">{{conditional[0].header}}</p>
                    <input class="check-input" 
                            type="checkbox" 
                            (change)="conditional[0].active = !conditional[0].active" 
                            [checked]="conditional[0].active">
                    <input  *ngIf="conditional[0].requiresNumberField" 
                            [disabled]="!conditional[0].active"
                            class="num-input" 
                            type="text" 
                            (input)="validateInput($event)" 
                            (change)="valueChange(conditional[0], $event)" 
                            attr.max="{{conditional[0].maxValue}}"
                            placeholder="Amount"
                            [value]="conditional[0].currentValue"/>
                    <span class="checkbox"></span>
                </label>
            </div>
        </div>
    </div>
</div>
